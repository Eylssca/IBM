<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AI Show Director Demo</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif; }

    body {
      background: #050318;
      color: #fff;
      display: flex;
      flex-direction: column;
      height: 100vh;
      overflow: hidden;
    }

    #top-bar {
      padding: 10px 20px;
      font-size: 18px;
      font-weight: 600;
      background: linear-gradient(90deg,#0f172a,#1e293b);
      border-bottom: 1px solid #334155;
    }

    #layout {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 16px;
      padding: 16px;
      flex: 1;
      position: relative;
    }

    /* --- STAGE AREA --- */
    #stage-wrapper {
      position: relative;
      border-radius: 24px;
      overflow: hidden;
      background: radial-gradient(circle at top, #1d2b64, #050318);
      box-shadow: 0 0 40px rgba(0,0,0,0.7);
      display: flex;
      justify-content: center;
      align-items: center;
    }

    /* Background container for image or video */
    #background-content {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 1;
    }

    #stage-wrapper * {
        mix-blend-mode: screen;
    }

    #crowd {
      position: absolute;
      inset: 0;
      background-image: radial-gradient(circle, rgba(255,255,255,0.15) 1px, transparent 1px);
      background-size: 8px 8px;
      opacity: 0.2;
      mix-blend-mode: screen;
      z-index: 3;
    }

    #beam-layer {
      position: absolute;
      inset: 0;
      pointer-events: none;
      mix-blend-mode: screen;
      z-index: 4;
    }

    .beam {
      position: absolute;
      width: 30%;
      height: 120%;
      top: -20%;
      background: radial-gradient(circle at 50% 0%, rgba(255,255,255,0.9), transparent 65%);
      opacity: 0.25;
      transform-origin: top center;
      animation: beamSwing 4s ease-in-out infinite alternate;
      filter: blur(3px);
    }
    .beam.b1 { left: 20%; }
    .beam.b2 { left: 50%; animation-delay: 1s; }
    .beam.b3 { left: 80%; animation-delay: 2s; }

    @keyframes beamSwing {
      0% { transform: rotate(-12deg);}
      100% { transform: rotate(12deg);}
    }

    /* hexagon stage platform */
    #stage-platform {
      position: absolute;
      left: 50%; top: 60%;
      transform: translate(-50%, -50%);
      width: 55%;
      aspect-ratio: 1 / 0.5;
      background: linear-gradient(135deg,#ff8cf0,#ffc857);
      clip-path: polygon(10% 0, 90% 0, 100% 50%, 90% 100%, 10% 100%, 0 50%);
      box-shadow: 0 0 40px rgba(255,120,255,0.8);
      z-index: 5;
    }

    /* AI color filter over everything */
    #ai-filter {
      position: absolute;
      inset: 0;
      mix-blend-mode: screen;
      background: radial-gradient(circle at 50% 20%, rgba(255,0,255,0.4), transparent 70%);
      opacity: 0.0;
      transition: opacity 0.4s ease, background 0.4s ease;
      z-index: 6;
      pointer-events: none;
    }

    /* lyric / chat wall */
    #lyric-wall {
      position: absolute;
      left: 20px;
      top: 20px;
      width: 32%;
      max-height: 60%;
      padding: 12px 18px;
      border-radius: 16px;
      background: linear-gradient(135deg, rgba(15,23,42,0.85), rgba(30,64,175,0.7));
      backdrop-filter: blur(10px);
      font-size: 13px;
      line-height: 1.4;
      overflow: hidden;
      z-index: 7;
    }

    #lyric-title {
      font-weight: 600;
      margin-bottom: 6px;
    }

    #lyric-body {
      opacity: 0.9;
      white-space: pre-wrap;
      font-size: 12px;
    }

    /* left username bubble */
    #user-badge {
      position: absolute;
      left: 4%;
      bottom: 12%;
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(15,23,42,0.85);
      backdrop-filter: blur(10px);
      font-size: 13px;
      z-index: 7;
    }

    #user-avatar {
      width: 28px; height: 28px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #fff, #f973ff);
      display: flex; align-items: center; justify-content: center;
      font-size: 16px;
    }

    /* --- CONTROL PANEL --- */
    #control-panel {
      border-radius: 16px;
      padding: 14px 16px;
      background: linear-gradient(135deg,#020617,#0f172a);
      border: 1px solid #1f2937;
      display: flex;
      flex-direction: column;
      gap: 10px;
      position: relative;
      z-index: 10;
    }

    #control-panel h2 {
      font-size: 16px;
      margin-bottom: 4px;
    }

    .btn-row {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    button {
      border-radius: 999px;
      border: none;
      padding: 6px 14px;
      font-size: 13px;
      cursor: pointer;
      background: linear-gradient(135deg,#4f46e5,#ec4899);
      color: #fff;
      box-shadow: 0 0 12px rgba(79,70,229,0.6);
      transition: transform 0.1s ease, box-shadow 0.1s ease, opacity 0.2s;
    }
    button.secondary {
      background: #111827;
      box-shadow: none;
      border: 1px solid #4b5563;
    }
    button:hover { transform: translateY(-1px); box-shadow: 0 0 16px rgba(236,72,153,0.7);}
    button:active { transform: translateY(0); box-shadow: 0 0 8px rgba(236,72,153,0.5); }

    textarea {
      width: 100%;
      min-height: 70px;
      resize: vertical;
      border-radius: 8px;
      border: 1px solid #4b5563;
      background: #020617;
      color: #e5e7eb;
      padding: 8px;
      font-size: 13px;
    }

    #ai-debug {
      font-size: 11px;
      color: #9ca3af;
      max-height: 90px;
      overflow: auto;
      white-space: pre-wrap;
    }

    #mood-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 3px 10px;
      border-radius: 999px;
      background: rgba(15,23,42,0.9);
      font-size: 11px;
      margin-left: 8px;
    }

    #live-comments {
      max-height: 120px;
      overflow-y: auto;
      background: rgba(15,23,42,0.5);
      border-radius: 8px;
      padding: 8px;
      font-size: 11px;
      line-height: 1.3;
      margin-top: 8px;
    }

    /* Floating incoming comment style */
    .floating-comment {
      position: absolute;
      pointer-events: none;
      z-index: 30;
      padding: 8px 12px;
      border-radius: 12px;
      background: rgba(0,0,0,0.6);
      color: #fff;
      font-size: 13px;
      backdrop-filter: blur(6px);
      transform-origin: center;
      animation: floatPop 5000ms ease forwards;
      filter: drop-shadow(0 6px 18px rgba(0,0,0,0.6));
      white-space: nowrap;
    }

    @keyframes floatPop {
      0% { opacity: 0; transform: translateY(10px) scale(0.9) rotate(-6deg); }
      10% { opacity: 1; transform: translateY(0) scale(1) rotate(0deg); }
      80% { opacity: 1; transform: translateY(-24px) scale(1.02) rotate(4deg); }
      100% { opacity: 0; transform: translateY(-48px) scale(0.98) rotate(2deg); }
    }
  </style>
</head>
<body>
  <div id="top-bar">
    AURA â€” <span style="opacity:0.8;">Live Crowd + AI Demo</span>
  </div>

  <div id="layout">
    <!-- LEFT: STAGE -->
    <div id="stage-wrapper">
      <!-- USE EITHER IMAGE OR VIDEO BELOW BY UNCOMMENTING ONE -->

      <!-- Image background (default) -->
      <img id="background-content" src="1.jpg" alt="Stage Background Image" style="z-index: 1;">

      <!-- Or video background (comment out the img above if using video) -->
      <!--
      <video id="background-content" autoplay muted loop playsinline>
        <source src="your-video.mp4" type="video/mp4" />
        Your browser does not support the video tag.
      </video>
      -->

      <!-- Lighting effects ABOVE background -->
      <div id="beam-layer" style="z-index: 2;">
        <div class="beam b1"></div>
        <div class="beam b2"></div>
        <div class="beam b3"></div>
      </div>

      <!-- AI filter and UI LAST (highest z-index) -->
      <div id="ai-filter" style="z-index: 3;"></div>

      <!-- QR code display -->
      <div style="position: absolute; top: 20px; right: 20px; z-index: 20;">
        <img src="https://api.qrserver.com/v1/create-qr-code/?size=120x120&data=https://eylssca.github.io/IBM/send" 
             alt="Scan to comment" style="border-radius: 12px; box-shadow: 0 4px 20px rgba(255,255,255,0.3);">
        <div style="text-align: center; font-size: 11px; margin-top: 4px; opacity: 0.8;">Scan to react live</div>
      </div>
    </div>

    <!-- RIGHT: CONTROL PANEL -->
    <div id="control-panel">
      <h2>Live Crowd AI <span id="mood-pill">Mood: â€”</span></h2>

      <div style="font-size:12px; opacity:0.85;">
        Crowd comments analyzed in real-time by AI â†“
      </div>

      <!-- Live comment feed -->
      <div id="live-comments">
        No comments yet...
      </div>

      <!-- lyric / chat wall moved to the right control panel -->
      <div id="lyric-wall" style="position:static; width:100%; max-height:160px; margin-top:8px; z-index:9;">
        <div id="lyric-title">Waiting for crowd...</div>
        <div id="lyric-body" style="font-size:12px; opacity:0.9;">Scan QR â†’ Send comments â†’ Watch AI react!</div>
      </div>

      <div id="ai-debug" style="margin-top:8px;"></div>

    </div>
  </div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

  <script>
Â    const filterEl = document.getElementById('ai-filter');
Â  Â  const lyricTitleEl = document.getElementById('lyric-title');
Â  Â  const lyricBodyEl = document.getElementById('lyric-body');
Â  Â  const debugEl = document.getElementById('ai-debug');
Â  Â  const moodPill = document.getElementById('mood-pill');
Â  Â  const liveCommentsEl = document.getElementById('live-comments');

Â  Â  // Firebase config: REPLACE with your config values
Â  Â  const firebaseConfig = {
Â  Â  Â  Â  apiKey: "AIzaSyC34piii16GqYm_It_O4Qm3-5J-j0eJg4w",
Â  Â  Â  Â  authDomain: "live-show-comments.firebaseapp.com",
Â  Â  Â  Â  projectId: "live-show-comments",
Â  Â  Â  Â  storageBucket: "live-show-comments.firebasestorage.app",
Â  Â  Â  Â  messagingSenderId: "682418279340",
Â  Â  Â  Â  appId: "1:682418279340:web:e97f0d4c1317eacddc2009",
Â  Â  Â  Â  databaseURL: "https://live-show-comments-default-rtdb.asia-southeast1.firebasedatabase.app/"
Â  Â  };

Â  Â  firebase.initializeApp(firebaseConfig);
Â  Â  const db = firebase.database();
Â  Â  // Use a root ref to allow removal on load, and a query for last-20 listening
Â  Â  const commentsRootRef = db.ref("comments");
Â  Â  const commentsRef = commentsRootRef.limitToLast(20);

Â  Â  // Clear comment records on every page load (server-side removal).
Â  Â  // This ensures records are reset each refresh as requested.
Â  Â  commentsRootRef.remove()
Â  Â  Â  .then(() => { debugEl.textContent = 'Comment records cleared on page load.'; })
Â  Â  Â  .catch((e) => { console.warn('Failed to clear comments:', e); });

Â  Â  // Store recent comments locally
Â  Â  let recentComments = [];

Â  Â  // For every incoming message: show floating UI and trigger AI analysis (serialized)
Â  Â  commentsRef.on("child_added", async (snapshot) => {
Â  Â  Â  const data = snapshot.val();
Â  Â  Â  if (!data?.text) return;

Â  Â  Â  recentComments.push(data.text);
Â  Â  Â  if (recentComments.length > 10) recentComments.shift();
Â  Â  Â  updateLiveFeed();
Â  Â  Â  showFloatingComment(data.text);

Â  Â  Â  // Trigger real AI analysis for the latest comment
Â  Â  Â  analyzeCrowdWithAI([data.text]);
Â  Â  });

Â  Â  // Show a floating comment on the stage for a few seconds
Â  Â  function showFloatingComment(text) {
Â  Â  Â  const wrapper = document.getElementById('stage-wrapper');
Â  Â  Â  if (!wrapper) return;
Â  Â  Â  const el = document.createElement('div');
Â  Â  Â  el.className = 'floating-comment';
Â  Â  Â  el.textContent = text;

Â  Â  Â  // random position within wrapper (avoid edges)
Â  Â  Â  const w = wrapper.clientWidth;
Â  Â  Â  const h = wrapper.clientHeight;
Â  Â  Â  const left = Math.max(8, Math.floor(Math.random() * (w - 160)));
Â  Â  Â  const top = Math.max(8, Math.floor(Math.random() * (h - 60)));
Â  Â  Â  el.style.left = `${left}px`;
Â  Â  Â  el.style.top = `${top}px`;

Â  Â  Â  // slight random rotation to make it non-directional
Â  Â  Â  el.style.transform = `rotate(${(Math.random()-0.5)*12}deg)`;

Â  Â  Â  wrapper.appendChild(el);

Â  Â  Â  // remove after animation duration + small buffer (5s animation â†’ remove at ~5200ms)
Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  el.remove();
Â  Â  Â  }, 5200);
Â  Â  }

Â  Â  // Restore missing UI helpers
Â  Â  function updateLiveFeed() {
Â  Â  Â  liveCommentsEl.innerHTML = recentComments.length
Â  Â  Â  Â  ? recentComments.map(c => `<div style="margin: 2px 0; opacity: 0.8;">${escapeHtml(c)}</div>`).join('')
Â  Â  Â  Â  : 'No comments yet...';
Â  Â  Â  liveCommentsEl.scrollTop = liveCommentsEl.scrollHeight;
Â  Â  }

Â  Â  function escapeHtml(text) {
Â  Â  Â  const div = document.createElement('div');
Â  Â  Â  div.textContent = text;
Â  Â  Â  return div.innerHTML;
Â  Â  }

Â  Â  // Cloudflare Worker URL - This will now handle the secret API call
Â  Â  const WORKER_PROXY_URL = "https://llm-cors-proxy.yishunchiu007.workers.dev";
    
Â  Â  // AI call locking to avoid concurrent requests when many users send at the same time
Â  Â  let aiRunning = false;
Â  Â  let pendingRun = false;
Â  Â  let pendingComments = null;

Â  Â  // Call AI via the Worker to analyze recent comments and get stage plan
Â  Â  async function analyzeCrowdWithAI(comments) {
Â  Â  Â  if (aiRunning) {
Â  Â  Â  Â  pendingRun = true;
Â  Â  Â  Â  pendingComments = comments;
Â  Â  Â  Â  debugEl.textContent = "ðŸ¤– AI busy â€” queued latest comments.";
Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  Â  aiRunning = true;
Â  Â  Â  debugEl.textContent = "ðŸ¤– AI analyzing crowd (via Worker)...";

Â  Â  Â  try {
Â  Â  Â  Â  // **CALL THE WORKER**
Â  Â  Â  Â  const response = await fetch(WORKER_PROXY_URL, {
Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  headers: {
Â  Â  Â  Â  Â  Â  'Content-Type': 'application/json',
Â  Â  Â  Â  Â  Â  // Add any custom header your worker expects to signal an AI plan request
Â  Â  Â  Â  Â  Â  'X-Action-Type': 'ai-stage-plan' 
Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  body: JSON.stringify({ comments: comments })
Â  Â  Â  Â  });

Â  Â  Â  Â  if (!response.ok) {
Â  Â  Â  Â  Â  throw new Error(`Worker failed with status ${response.status}: ${await response.text()}`);
Â  Â  Â  Â  }

Â  Â  Â  Â  const plan = await response.json();
        
Â  Â  Â  Â  applyStagePlan(plan);
Â  Â  Â  Â  debugEl.textContent = `âœ… AI Plan received from Worker: ${plan.effect}`;
Â  Â  Â  } catch (e) {
Â  Â  Â  Â  debugEl.textContent = `Error calling AI Worker: ${e.message}`;
Â  Â  Â  Â  moodPill.textContent = 'Mood: ðŸš¨';
Â  Â  Â  } finally {
Â  Â  Â  Â  aiRunning = false;
Â  Â  Â  Â  if (pendingRun) {
Â  Â  Â  Â  Â  pendingRun = false;
Â  Â  Â  Â  Â  const toRun = pendingComments || comments;
Â  Â  Â  Â  Â  pendingComments = null;
Â  Â  Â  Â  Â  analyzeCrowdWithAI(toRun);
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  }

Â  Â  // Extract JSON substring from text (no longer needed if Worker returns clean JSON)
Â  Â  function extractJSONFromText(text) {
Â  Â  Â  // try to find the first "{" and last "}" that make valid JSON
Â  Â  Â  const first = text.indexOf('{');
Â  Â  Â  const last = text.lastIndexOf('}');
Â  Â  Â  if (first === -1 || last === -1 || last <= first) return null;
Â  Â  Â  const candidate = text.slice(first, last + 1);
Â  Â  Â  return candidate;
Â  Â  }

Â  Â  function applyStagePlan(plan) {
Â  Â  Â  // Map incoming intensity (0.1-1.0) to percent and category (1..10)
Â  Â  Â  const inIntensity = Math.max(0.0, Math.min(1.0, plan.intensity ?? 0.5));
Â  Â  Â  const percent = Math.round(inIntensity * 100);
Â  Â  Â  const category = percent === 0 ? 0 : Math.min(9, Math.ceil(percent / 10) - 1);
Â  Â  Â  const strength = (category + 1) / 10; // 0.1 .. 1.0

Â  Â  Â  // 10-category â†’ effect mapping (light â†’ strong) with base (pale) and vivid colors + mood label
Â  Â  Â  const EFFECT_MAP = [
Â  Â  Â  Â  { effect: 'SPARKLE', Â  Â  Â baseColor: '#e6f7ff', vividColor: '#7fd3ff', Â mood: 'âœ¨ Calm' Â  Â }, // 1
Â  Â  Â  Â  { effect: 'CHILL_WAVE', Â  baseColor: '#eafcff', vividColor: '#4fd1e0', Â mood: 'ðŸŒŠ Chill' Â  }, // 2
Â  Â  Â  Â  { effect: 'COZY_MODE', Â  Â baseColor: '#eef6ff', vividColor: '#60a5fa', Â mood: 'ðŸŒ™ Cozy' Â  Â }, // 3
Â  Â  Â  Â  { effect: 'PULSE_NEON', Â  baseColor: '#f0fff4', vividColor: '#34d399', Â mood: 'ðŸ’¡ Pulse' Â  }, // 4
Â  Â  Â  Â  { effect: 'STROBE_BLUE', Â baseColor: '#f2f8ff', vividColor: '#3b82f6', Â mood: 'ðŸ”µ Strobe' Â }, // 5
Â  Â  Â  Â  { effect: 'STROBE_RED', Â  baseColor: '#fff3f3', vividColor: '#ef4444', Â mood: 'ðŸ”´ Strobe' Â }, // 6
Â  Â  Â  Â  { effect: 'LASER_BURST', Â baseColor: '#fff0fb', vividColor: '#ff6ec7', Â mood: 'âš¡ Laser' Â  Â }, // 7
Â  Â  Â  Â  { effect: 'FIREWORKS', Â  Â baseColor: '#fff8f0', vividColor: '#ffb020', Â mood: 'ðŸŽ† Fireworks'}, // 8
Â  Â  Â  Â  { effect: 'ENCORE_GOLD', Â baseColor: '#fff9f2', vividColor: '#ffc857', Â mood: 'âœ¨ Encore' Â  }, // 9
Â  Â  Â  Â  { effect: 'RAINBOW_FLOW', baseColor: '#fff6fb', vividColor: '#ff4da6', Â mood: 'ðŸŒˆ Riot' Â  Â  } Â // 10
Â  Â  Â  ];

Â  Â  Â  const chosen = EFFECT_MAP[category];

Â  Â  Â  // Mix a pale base color and a vivid color according to strength so low categories look pale/calm and high are vivid/sharp
Â  Â  Â  function mixHexColors(a, b, t) {
Â  Â  Â  Â  const pa = a.replace('#','');
Â  Â  Â  Â  const pb = b.replace('#','');
Â  Â  Â  Â  const ar = parseInt(pa.substring(0,2),16), ag = parseInt(pa.substring(2,4),16), ab = parseInt(pa.substring(4,6),16);
Â  Â  Â  Â  const br = parseInt(pb.substring(0,2),16), bg = parseInt(pb.substring(2,4),16), bb = parseInt(pb.substring(4,6),16);
Â  Â  Â  Â  const rr = Math.round(ar + (br - ar) * t);
Â  Â  Â  Â  const rg = Math.round(ag + (bg - ag) * t);
Â  Â  Â  Â  const rb = Math.round(ab + (bb - ab) * t);
Â  Â  Â  Â  return `#${rr.toString(16).padStart(2,'0')}${rg.toString(16).padStart(2,'0')}${rb.toString(16).padStart(2,'0')}`;
Â  Â  Â  }

Â  Â  Â  const primaryHex = plan.primaryColor || mixHexColors(chosen.baseColor, chosen.vividColor, strength);
Â  Â  Â  const vividHex = mixHexColors(chosen.baseColor, chosen.vividColor, Math.min(1, strength + 0.25));

Â  Â  Â  // Visual strength depends on category (increasing): change opacity, saturation, blur â†’ sharpness
Â  Â  Â  filterEl.style.background = `radial-gradient(circle at 50% 20%, ${hexWithAlpha(primaryHex, 0.25 + strength*0.6)}, transparent 70%)`;
Â  Â  Â  filterEl.style.opacity = 0.08 + strength * 0.9; // subtle -> bold

Â  Â  Â  // Beams become more opaque, more saturated, and sharper as strength increases
Â  Â  Â  document.querySelectorAll('.beam').forEach((b, i) => {
Â  Â  Â  Â  const beamOpacity = (0.03 + strength * 0.85);
Â  Â  Â  Â  b.style.opacity = beamOpacity.toString();
Â  Â  Â  Â  // blur reduces with strength to make beams sharper at high intensity
Â  Â  Â  Â  const blurPx = Math.max(0.5, 4 - (strength * 3.5));
Â  Â  Â  Â  b.style.filter = `blur(${blurPx}px)`;
Â  Â  Â  Â  b.style.background = `radial-gradient(circle at 50% 0%, ${hexWithAlpha(vividHex, 0.95)}, transparent 65%)`;
Â  Â  Â  });

Â  Â  Â  // Platform glow stronger and more vivid with strength
Â  Â  Â  const stagePlatform = document.getElementById('stage-platform');
Â  Â  Â  if (stagePlatform) {
Â  Â  Â  Â  const glowSize = 8 + (strength * 120);
Â  Â  Â  Â  stagePlatform.style.boxShadow = `0 0 ${glowSize}px ${hexWithAlpha(vividHex, 0.9 * strength)}`;
Â  Â  Â  }

Â  Â  Â  // Update lyric / UI; show the category-mapped effect and mood
Â  Â  Â  lyricTitleEl.textContent = plan.mcLine || 'AI MC reacting to the crowd...';
Â  Â  Â  lyricBodyEl.textContent =
Â  Â  Â  Â  `Effect: ${chosen.effect}\nIntensity: ${percent}% (category ${category + 1}/10)\n\n${plan.explanation || ''}`;

Â  Â  Â  const moodLabel = chosen.mood || 'ðŸŽ¨ Scene';
Â  Â  Â  moodPill.textContent = 'Mood: ' + moodLabel;
Â  Â  Â  debugEl.textContent += `\n\n[Displayed plan: ${percent}% â†’ category ${category + 1} â†’ ${chosen.effect} / ${moodLabel}]`;
Â  Â  }

Â  Â  function hexWithAlpha(hex, alpha) {
Â  Â  Â  const c = hex.replace('#', '');
Â  Â  Â  const r = parseInt(c.substring(0, 2), 16);
Â  Â  Â  const g = parseInt(c.substring(2, 4), 16);
Â  Â  Â  const b = parseInt(c.substring(4, 6), 16);
Â  Â  Â  return `rgba(${r},${g},${b},${alpha})`;
Â  Â  }
Â  </script>
</body>
</html>
